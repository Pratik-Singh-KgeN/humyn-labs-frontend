#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Emergency escape hatch
if [ "$SKIP_PERF_CHECKS" = "true" ]; then
  echo "âš ï¸  SKIPPING performance checks (SKIP_PERF_CHECKS=true)"
  exit 0
fi

echo "ğŸ—ï¸  Building app for performance checks..."
pnpm --filter humyn-bd-web build || exit 1

echo "ğŸ“¦ Running size-limit..."
pnpm --filter humyn-bd-web analyze:size || exit 1

echo "ğŸ” Running Lighthouse CI..."
pnpm --filter humyn-bd-web analyze:lighthouse || exit 1

echo "âœ… Performance checks passed. Proceeding with push."
